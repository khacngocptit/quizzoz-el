<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Part 4 - Practice Mode</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .mode-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .mode-btn {
            padding: 15px 30px;
            font-size: 1.1em;
            border: 2px solid white;
            background: rgba(255,255,255,0.2);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .mode-btn.active {
            background: white;
            color: #667eea;
            font-weight: bold;
        }
        
        .timer {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            font-size: 1.5em;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            text-align: center;
            color: white;
        }
        
        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #48c6ef 0%, #6f86d6 100%);
            height: 100%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            min-height: 500px;
        }
        
        .topic-title {
            font-size: 2em;
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        .flag-tags {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }
        
        .flag-tags h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .tags-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .tag {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        .tags-meaning {
            color: #666;
            font-style: italic;
            margin-top: 10px;
        }
        
        /* Study Mode */
        .points-list {
            list-style: none;
        }
        
        .points-list li {
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .points-list li:hover {
            transform: translateX(10px);
            background: #e9ecef;
        }
        
        .point-tag {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .point-meaning {
            color: #888;
            font-size: 0.9em;
            font-style: italic;
            margin-left: 10px;
        }
        
        /* Practice Mode */
        .sortable-container {
            min-height: 400px;
        }
        
        .sortable-item {
            padding: 15px 20px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #6c757d;
            cursor: move;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .sortable-item.dragging {
            opacity: 0.5;
            transform: scale(1.05);
        }
        
        .sortable-item.correct {
            border-left-color: #28a745;
            background: #d4edda;
        }
        
        .sortable-item.incorrect {
            border-left-color: #dc3545;
            background: #f8d7da;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .drag-handle {
            font-size: 1.5em;
            color: #6c757d;
            cursor: grab;
        }
        
        .drag-handle:active {
            cursor: grabbing;
        }
        
        .item-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: #6c757d;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
        }
        
        .item-content {
            flex-grow: 1;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        button {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .btn-prev {
            background: #6c757d;
            color: white;
        }
        
        .btn-next, .btn-check {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-restart {
            background: #dc3545;
            color: white;
        }
        
        .btn-shuffle {
            background: #ffc107;
            color: #000;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .feedback.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }
        
        .feedback.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }
        
        .wrong-order {
            margin-top: 15px;
            padding: 15px;
            background: #fff3cd;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }
        
        .wrong-order-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 10px;
        }
        
        .wrong-order-list {
            color: #856404;
            font-size: 0.95em;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            color: white;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .stat-item {
            text-align: center;
            background: rgba(255,255,255,0.2);
            padding: 15px 30px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            min-width: 150px;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .card {
                padding: 20px;
            }
            
            .topic-title {
                font-size: 1.5em;
            }
            
            .mode-btn {
                padding: 12px 20px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ IELTS Reading Part 4</h1>
            <p>H·ªçc thu·ªôc v√† luy·ªán t·∫≠p 18 Topics</p>
        </div>
        
        <div class="mode-selector">
            <button class="mode-btn active" onclick="switchMode('study')">üìö Ch·∫ø ƒë·ªô h·ªçc</button>
            <button class="mode-btn" onclick="switchMode('practice')">üéÆ Ch·∫ø ƒë·ªô luy·ªán t·∫≠p</button>
        </div>
        
        <div class="timer">
            ‚è±Ô∏è Th·ªùi gian: <span id="timer">04:00:00</span>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progress">
                <span id="progress-text">0/18</span>
            </div>
        </div>
        
        <div class="card">
            <h2 class="topic-title" id="topic-name"></h2>
            
            <div class="flag-tags">
                <h3>üè∑Ô∏è Flag Tags (T·ª´ kh√≥a quan tr·ªçng):</h3>
                <div class="tags-list" id="tags-list"></div>
                <div class="tags-meaning" id="tags-meaning"></div>
            </div>
            
            <div id="study-mode" class="study-mode">
                <ul class="points-list" id="points-list"></ul>
            </div>
            
            <div id="practice-mode" class="practice-mode hidden">
                <div class="sortable-container" id="sortable-container"></div>
                <div id="feedback"></div>
            </div>
            
            <div class="controls">
                <button class="btn-prev" id="btn-prev" onclick="prevTopic()">‚¨ÖÔ∏è Tr∆∞·ªõc</button>
                <button class="btn-restart" onclick="restartTimer()">üîÑ Reset Timer</button>
                <button class="btn-shuffle hidden" id="btn-shuffle" onclick="shuffleItems()">üîÄ Tr√°o l·∫°i</button>
                <button class="btn-check hidden" id="btn-check" onclick="checkOrder()">‚úÖ Ki·ªÉm tra</button>
                <button class="btn-next" id="btn-next" onclick="nextTopic()">Ti·∫øp ‚û°Ô∏è</button>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <span class="stat-value" id="current-topic">1</span>
                <span class="stat-label">Topic hi·ªán t·∫°i</span>
            </div>
            <div class="stat-item">
                <span class="stat-value">18</span>
                <span class="stat-label">T·ªïng Topics</span>
            </div>
            <div class="stat-item">
                <span class="stat-value" id="attempts">0</span>
                <span class="stat-label">S·ªë l·∫ßn th·ª≠</span>
            </div>
            <div class="stat-item">
                <span class="stat-value" id="time-spent">0</span>
                <span class="stat-label">Ph√∫t ƒë√£ h·ªçc</span>
            </div>
        </div>
    </div>

    <script>
        const topics = [
            {
                name: "Zoo",
                mainTags: ["SYMBOLS", "OPEN", "INDUSTRY", "FREEDOM", "VALUES", "NEW", "MODERN"],
                tagsMeaning: "Bi·ªÉu t∆∞·ª£ng - M·ªü c·ª≠a - C√¥ng nghi·ªáp - T·ª± do - Gi√° tr·ªã - M·ªõi - Hi·ªán ƒë·∫°i",
                points: [
                    { text: "Symbols of privilege and wealth", tag: "SYMBOLS", meaning: "Bi·ªÉu t∆∞·ª£ng" },
                    { text: "Open the door for everyone", tag: "OPEN", meaning: "M·ªü c·ª≠a" },
                    { text: "Away from amusement towards industry", tag: "INDUSTRY", meaning: "C√¥ng nghi·ªáp" },
                    { text: "Away from the enclosure towards greater freedom", tag: "FREEDOM", meaning: "T·ª± do" },
                    { text: "A different set of values", tag: "VALUES", meaning: "Gi√° tr·ªã" },
                    { text: "A new mission of conversation", tag: "NEW", meaning: "M·ªõi" },
                    { text: "A Modern zoo alternative", tag: "MODERN", meaning: "Hi·ªán ƒë·∫°i" }
                ]
            },
            {
                name: "Coffee",
                mainTags: ["CUSTOM", "COMMUNICATION", "HABIT", "PROBLEMS", "REMEDY", "HEALTH", "ORIGIN"],
                tagsMeaning: "Phong t·ª•c - Giao ti·∫øp - Th√≥i quen - V·∫•n ƒë·ªÅ - Gi·∫£i ph√°p - S·ª©c kh·ªèe - Ngu·ªìn g·ªëc",
                points: [
                    { text: "The custom of coffee drinking begins to spread", tag: "CUSTOM", meaning: "Phong t·ª•c" },
                    { text: "Coffee encourages the art of communication", tag: "COMMUNICATION", meaning: "Giao ti·∫øp" },
                    { text: "A habit that has become a big economy", tag: "HABIT", meaning: "Th√≥i quen" },
                    { text: "Problems of coffee economy", tag: "PROBLEMS", meaning: "V·∫•n ƒë·ªÅ" },
                    { text: "A remedy of unjust revenue distribution", tag: "REMEDY", meaning: "Gi·∫£i ph√°p" },
                    { text: "The health risks versus health benefits debate", tag: "HEALTH", meaning: "S·ª©c kh·ªèe" },
                    { text: "The ancient origin of coffee", tag: "ORIGIN", meaning: "Ngu·ªìn g·ªëc" }
                ]
            },
            {
                name: "Tulip",
                mainTags: ["GOLDEN AGE", "COMING", "OBJECT", "TYPES", "MECHANICS", "EUROPE", "UNEXPECTED"],
                tagsMeaning: "Th·ªùi ho√†ng kim - ƒê·∫øn - ƒê·ªëi t∆∞·ª£ng - C√°c lo·∫°i - C∆° ch·∫ø - Ch√¢u √Çu - B·∫•t ng·ªù",
                points: [
                    { text: "The economy during the Golden Age", tag: "GOLDEN AGE", meaning: "Th·ªùi ho√†ng kim" },
                    { text: "Coming into Fashion", tag: "COMING", meaning: "ƒê·∫øn/Xu·∫•t hi·ªán" },
                    { text: "An object of trade", tag: "OBJECT", meaning: "ƒê·ªëi t∆∞·ª£ng" },
                    { text: "Different types of tulip", tag: "TYPES", meaning: "C√°c lo·∫°i" },
                    { text: "Trade mechanics", tag: "MECHANICS", meaning: "C∆° ch·∫ø" },
                    { text: "Trade across Europe", tag: "EUROPE", meaning: "Ch√¢u √Çu" },
                    { text: "An unexpected turn of events", tag: "UNEXPECTED", meaning: "B·∫•t ng·ªù" }
                ]
            },
            {
                name: "Eating China",
                mainTags: ["ORIGINS", "INFLUENCE", "REGIONAL", "METHODS", "STYLE", "CHANGES", "EFFECTS"],
                tagsMeaning: "Ngu·ªìn g·ªëc - ·∫¢nh h∆∞·ªüng - Khu v·ª±c - Ph∆∞∆°ng ph√°p - Phong c√°ch - Thay ƒë·ªïi - T√°c ƒë·ªông",
                points: [
                    { text: "The origins of chinese food", tag: "ORIGINS", meaning: "Ngu·ªìn g·ªëc" },
                    { text: "The influence of philosophy", tag: "INFLUENCE", meaning: "·∫¢nh h∆∞·ªüng" },
                    { text: "Regional variations", tag: "REGIONAL", meaning: "Khu v·ª±c" },
                    { text: "Cooking methods", tag: "METHODS", meaning: "Ph∆∞∆°ng ph√°p" },
                    { text: "The style of eating", tag: "STYLE", meaning: "Phong c√°ch" },
                    { text: "Changes in the Chinese diets", tag: "CHANGES", meaning: "Thay ƒë·ªïi" },
                    { text: "Effects of a changing diet", tag: "EFFECTS", meaning: "T√°c ƒë·ªông" }
                ]
            },
            {
                name: "Meatless Diet",
                mainTags: ["TYPES", "VARIOUS", "POSSIBLE", "FARMING", "RESPONSIBILITIES", "HEALTH", "RESPECT"],
                tagsMeaning: "C√°c lo·∫°i - Kh√°c nhau - C√≥ th·ªÉ - ChƒÉn nu√¥i - Tr√°ch nhi·ªám - S·ª©c kh·ªèe - T√¥n tr·ªçng",
                points: [
                    { text: "Types of Vegetarian", tag: "TYPES", meaning: "C√°c lo·∫°i" },
                    { text: "Various explanations", tag: "VARIOUS", meaning: "Kh√°c nhau" },
                    { text: "Possible global food crisis", tag: "POSSIBLE", meaning: "C√≥ th·ªÉ" },
                    { text: "Farming Factory", tag: "FARMING", meaning: "ChƒÉn nu√¥i" },
                    { text: "Our responsibilities for global", tag: "RESPONSIBILITIES", meaning: "Tr√°ch nhi·ªám" },
                    { text: "Health gets better with diet", tag: "HEALTH", meaning: "S·ª©c kh·ªèe" },
                    { text: "Respect the life", tag: "RESPECT", meaning: "T√¥n tr·ªçng" }
                ]
            },
            {
                name: "Charles Dickens",
                mainTags: ["DICKENS", "DIFFICULTIES", "KEEPING", "INFLUENCE", "SUCCESS", "PROTECT", "BRING"],
                tagsMeaning: "Dickens - Kh√≥ khƒÉn - Gi·ªØ - ·∫¢nh h∆∞·ªüng - Th√†nh c√¥ng - B·∫£o v·ªá - Mang",
                points: [
                    { text: "Dickens for our time", tag: "DICKENS", meaning: "Dickens" },
                    { text: "Difficulties for modern readers", tag: "DIFFICULTIES", meaning: "Kh√≥ khƒÉn" },
                    { text: "Keeping the readers guessing", tag: "KEEPING", meaning: "Gi·ªØ" },
                    { text: "The influence of media", tag: "INFLUENCE", meaning: "·∫¢nh h∆∞·ªüng" },
                    { text: "Dickens's early success", tag: "SUCCESS", meaning: "Th√†nh c√¥ng" },
                    { text: "Trying to protect his property", tag: "PROTECT", meaning: "B·∫£o v·ªá" },
                    { text: "Bring the books to life", tag: "BRING", meaning: "Mang" }
                ]
            },
            {
                name: "Early Australia",
                mainTags: ["NEW", "NATURAL", "TECHNOLOGY", "JOURNEY", "NO", "LACK", "DETERMINATION"],
                tagsMeaning: "M·ªõi - T·ª± nhi√™n - C√¥ng ngh·ªá - H√†nh tr√¨nh - Kh√¥ng - Thi·∫øu - Quy·∫øt t√¢m",
                points: [
                    { text: "New evidence to speculation", tag: "NEW", meaning: "M·ªõi" },
                    { text: "Natural barrier to resettlement", tag: "NATURAL", meaning: "T·ª± nhi√™n" },
                    { text: "Technology helps uncover the ocean's secret", tag: "TECHNOLOGY", meaning: "C√¥ng ngh·ªá" },
                    { text: "A Journey made by stages", tag: "JOURNEY", meaning: "H√†nh tr√¨nh" },
                    { text: "No precise figures available", tag: "NO", meaning: "Kh√¥ng" },
                    { text: "Lack of knowledge and skills", tag: "LACK", meaning: "Thi·∫øu" },
                    { text: "Determination of the explorers through the ages", tag: "DETERMINATION", meaning: "Quy·∫øt t√¢m" }
                ]
            },
            {
                name: "Frozen Land",
                mainTags: ["WHO", "FIRST", "END", "HIDDEN", "RACE", "LESS", "COLD"],
                tagsMeaning: "Ai - ƒê·∫ßu ti√™n - K·∫øt th√∫c - ·∫®n - Cu·ªôc ƒëua - √çt - L·∫°nh",
                points: [
                    { text: "Who is charge?", tag: "WHO", meaning: "Ai" },
                    { text: "First step on the ice", tag: "FIRST", meaning: "ƒê·∫ßu ti√™n" },
                    { text: "Where is the end of the Earth", tag: "END", meaning: "K·∫øt th√∫c" },
                    { text: "Hidden geography", tag: "HIDDEN", meaning: "·∫®n" },
                    { text: "Race to the pole", tag: "RACE", meaning: "Cu·ªôc ƒëua" },
                    { text: "Less effort needed", tag: "LESS", meaning: "√çt h∆°n" },
                    { text: "Why is it so cold", tag: "COLD", meaning: "L·∫°nh" }
                ]
            },
            {
                name: "Children Exercise",
                mainTags: ["FACTORS", "WORST", "SUCCESS", "EFFECTS", "BEHAVIOR", "DESIGN", "BALANCE"],
                tagsMeaning: "Y·∫øu t·ªë - T·ªìi t·ªá - Th√†nh c√¥ng - T√°c ƒë·ªông - H√†nh vi - Thi·∫øt k·∫ø - C√¢n b·∫±ng",
                points: [
                    { text: "Factors contributing to inactivity", tag: "FACTORS", meaning: "Y·∫øu t·ªë" },
                    { text: "The situation have the potential of being worst", tag: "WORST", meaning: "T·ªìi t·ªá" },
                    { text: "The success of a simple idea", tag: "SUCCESS", meaning: "Th√†nh c√¥ng" },
                    { text: "The wider effects of regular activity", tag: "EFFECTS", meaning: "T√°c ƒë·ªông" },
                    { text: "Ways in which the environment can influence behavior", tag: "BEHAVIOR", meaning: "H√†nh vi" },
                    { text: "A design for exercise and for study", tag: "DESIGN", meaning: "Thi·∫øt k·∫ø" },
                    { text: "Achieving the right balance", tag: "BALANCE", meaning: "C√¢n b·∫±ng" }
                ]
            },
            {
                name: "Music",
                mainTags: ["PHYSICALLY", "GOOD", "GREAT", "WAY", "CREATIVE", "FEELINGS", "WELL-BEING"],
                tagsMeaning: "Th·ªÉ ch·∫•t - T·ªët - Tuy·ªát v·ªùi - C√°ch - S√°ng t·∫°o - C·∫£m x√∫c - H·∫°nh ph√∫c",
                points: [
                    { text: "A physically demanding activity", tag: "PHYSICALLY", meaning: "Th·ªÉ ch·∫•t" },
                    { text: "A good way to boost your memory", tag: "GOOD", meaning: "T·ªët" },
                    { text: "A great opportunity to broaden your social circle", tag: "GREAT", meaning: "Tuy·ªát v·ªùi" },
                    { text: "A way to learn discipline and the importance of routine", tag: "WAY", meaning: "C√°ch" },
                    { text: "A creative outlet for expressing emotions", tag: "CREATIVE", meaning: "S√°ng t·∫°o" },
                    { text: "Enhanced sensitivity to other people's feelings", tag: "FEELINGS", meaning: "C·∫£m x√∫c" },
                    { text: "Develop a greater sense of well-being", tag: "WELL-BEING", meaning: "H·∫°nh ph√∫c" }
                ]
            },
            {
                name: "Consumer Age",
                mainTags: ["MAKING", "EXPERIMENT", "SECRECY", "RELEVANT", "DIFFICULTY", "COMPROMISE", "LESSONS"],
                tagsMeaning: "L√†m - Th√≠ nghi·ªám - B√≠ m·∫≠t - Li√™n quan - Kh√≥ khƒÉn - Th·ªèa hi·ªáp - B√†i h·ªçc",
                points: [
                    { text: "Making things last Longer", tag: "MAKING", meaning: "L√†m" },
                    { text: "A temporary Experiment", tag: "EXPERIMENT", meaning: "Th√≠ nghi·ªám" },
                    { text: "The reason of Secrecy", tag: "SECRECY", meaning: "B√≠ m·∫≠t" },
                    { text: "Still relevant to our times", tag: "RELEVANT", meaning: "Li√™n quan" },
                    { text: "The difficulty of being generous", tag: "DIFFICULTY", meaning: "Kh√≥ khƒÉn" },
                    { text: "Reason to reach a compromise", tag: "COMPROMISE", meaning: "Th·ªèa hi·ªáp" },
                    { text: "Important lessons for all of us", tag: "LESSONS", meaning: "B√†i h·ªçc" }
                ]
            },
            {
                name: "Dogget",
                mainTags: ["EASIEST", "LUCKY", "ORIGINS", "CHANGE", "REPUTATION", "CHAMPIONS", "MONEY"],
                tagsMeaning: "D·ªÖ nh·∫•t - May m·∫Øn - Ngu·ªìn g·ªëc - Thay ƒë·ªïi - Danh ti·∫øng - Nh√† v√¥ ƒë·ªãch - Ti·ªÅn",
                points: [
                    { text: "The easiest way to travel", tag: "EASIEST", meaning: "D·ªÖ nh·∫•t" },
                    { text: "Result of a lucky escape", tag: "LUCKY", meaning: "May m·∫Øn" },
                    { text: "Origins of what the winner receives", tag: "ORIGINS", meaning: "Ngu·ªìn g·ªëc" },
                    { text: "A need for change", tag: "CHANGE", meaning: "Thay ƒë·ªïi" },
                    { text: "Earning a reputation", tag: "REPUTATION", meaning: "Danh ti·∫øng" },
                    { text: "Generations of champions", tag: "CHAMPIONS", meaning: "Nh√† v√¥ ƒë·ªãch" },
                    { text: "Not in it for the money", tag: "MONEY", meaning: "Ti·ªÅn" }
                ]
            },
            {
                name: "Hotel",
                mainTags: ["FINANCIAL", "HIGH", "ADVANTAGES", "IMPACT", "LESS", "CHALLENGES", "COMPETITIVE"],
                tagsMeaning: "T√†i ch√≠nh - Cao - L·ª£i th·∫ø - T√°c ƒë·ªông - √çt - Th√°ch th·ª©c - C·∫°nh tranh",
                points: [
                    { text: "A sensible Financial Choice", tag: "FINANCIAL", meaning: "T√†i ch√≠nh" },
                    { text: "The price of convenience may be high", tag: "HIGH", meaning: "Cao" },
                    { text: "The importance of planning in Advantages", tag: "ADVANTAGES", meaning: "L·ª£i th·∫ø" },
                    { text: "The impact of Lack of freedom", tag: "IMPACT", meaning: "T√°c ƒë·ªông" },
                    { text: "The benefits of living with Less", tag: "LESS", meaning: "√çt h∆°n" },
                    { text: "The Challenges that Come with a New Perspective", tag: "CHALLENGES", meaning: "Th√°ch th·ª©c" },
                    { text: "A competitive Business", tag: "COMPETITIVE", meaning: "C·∫°nh tranh" }
                ]
            },
            {
                name: "Mountain",
                mainTags: ["CHANGING", "ACHIEVEMENT", "PUBLICISING", "DISTURBING", "WRONG", "FOCUS", "INTIMATE"],
                tagsMeaning: "Thay ƒë·ªïi - Th√†nh t√≠ch - C√¥ng b·ªë - ƒê√°ng lo - Sai - T·∫≠p trung - Th√¢n m·∫≠t",
                points: [
                    { text: "Our changing definition of mountains", tag: "CHANGING", meaning: "Thay ƒë·ªïi" },
                    { text: "A sense of achievement", tag: "ACHIEVEMENT", meaning: "Th√†nh t√≠ch" },
                    { text: "Publicising one's achievements", tag: "PUBLICISING", meaning: "C√¥ng b·ªë" },
                    { text: "A disturbing revelation", tag: "DISTURBING", meaning: "ƒê√°ng lo" },
                    { text: "The wrong priority", tag: "WRONG", meaning: "Sai" },
                    { text: "A focus on substantiality", tag: "FOCUS", meaning: "T·∫≠p trung" },
                    { text: "A more intimate relationship", tag: "INTIMATE", meaning: "Th√¢n m·∫≠t" }
                ]
            },
            {
                name: "The Arrival of Four-day Week",
                mainTags: ["OUT DATE", "BENEFITS", "FINANCIAL", "UNFORESEEN", "DIFFICULT", "UNFAIR", "ALTERNATIVE"],
                tagsMeaning: "L·ªói th·ªùi - L·ª£i √≠ch - T√†i ch√≠nh - Kh√¥ng l∆∞·ªùng - Kh√≥ - B·∫•t c√¥ng - Thay th·∫ø",
                points: [
                    { text: "A way of life now out date", tag: "OUT DATE", meaning: "L·ªói th·ªùi" },
                    { text: "Benefits for employees", tag: "BENEFITS", meaning: "L·ª£i √≠ch" },
                    { text: "Undesirable financial consequences", tag: "FINANCIAL", meaning: "T√†i ch√≠nh" },
                    { text: "Unforeseen challenges for employees", tag: "UNFORESEEN", meaning: "Kh√¥ng l∆∞·ªùng tr∆∞·ªõc" },
                    { text: "Difficult to change old habits", tag: "DIFFICULT", meaning: "Kh√≥" },
                    { text: "An Unfair for some people", tag: "UNFAIR", meaning: "B·∫•t c√¥ng" },
                    { text: "Alternative solutions worth considering", tag: "ALTERNATIVE", meaning: "Thay th·∫ø" }
                ]
            },
            {
                name: "Urban Development",
                mainTags: ["REDEFINING", "ENCOURAGING", "SUPPORTING", "OVER-RELIANCE", "CONCERNS", "STRENGTHENING", "FOCUSING"],
                tagsMeaning: "ƒê·ªãnh nghƒ©a l·∫°i - Khuy·∫øn kh√≠ch - H·ªó tr·ª£ - Ph·ª• thu·ªôc qu√° - M·ªëi lo - TƒÉng c∆∞·ªùng - T·∫≠p trung",
                points: [
                    { text: "Redefining sustainable city planning", tag: "REDEFINING", meaning: "ƒê·ªãnh nghƒ©a l·∫°i" },
                    { text: "Encouraging green spaces in urban areas", tag: "ENCOURAGING", meaning: "Khuy·∫øn kh√≠ch" },
                    { text: "Supporting affordable housing projects", tag: "SUPPORTING", meaning: "H·ªó tr·ª£" },
                    { text: "Over-reliance on high-rise buildings", tag: "OVER-RELIANCE", meaning: "Ph·ª• thu·ªôc qu√° m·ª©c" },
                    { text: "Concerns about traffic congestion", tag: "CONCERNS", meaning: "M·ªëi lo ng·∫°i" },
                    { text: "Strengthening community engagement", tag: "STRENGTHENING", meaning: "TƒÉng c∆∞·ªùng" },
                    { text: "Focusing on renewable energy source", tag: "FOCUSING", meaning: "T·∫≠p trung" }
                ]
            },
            {
                name: "Woman Mathematics",
                mainTags: ["GENDER", "ACKNOWLEDGING", "MAN", "LONG", "LABELS", "ATTEMPTING", "UNIFORMITY"],
                tagsMeaning: "Gi·ªõi t√≠nh - Th·ª´a nh·∫≠n - Nam - D√†i - Nh√£n - C·ªë g·∫Øng - ƒê·ªìng nh·∫•t",
                points: [
                    { text: "Gender obscure achievements", tag: "GENDER", meaning: "Gi·ªõi t√≠nh" },
                    { text: "Acknowledging achievement of a pioneer", tag: "ACKNOWLEDGING", meaning: "Th·ª´a nh·∫≠n" },
                    { text: "Man unfairly credited", tag: "MAN", meaning: "Nam gi·ªõi" },
                    { text: "A long career showing exceptional ability", tag: "LONG", meaning: "D√†i" },
                    { text: "Labels can change perspective on people", tag: "LABELS", meaning: "Nh√£n m√°c" },
                    { text: "Attempting to create a gender balance", tag: "ATTEMPTING", meaning: "C·ªë g·∫Øng" },
                    { text: "Uniformity is not always good", tag: "UNIFORMITY", meaning: "ƒê·ªìng nh·∫•t" }
                ]
            },
            {
                name: "Digital Transformation",
                mainTags: ["REDEFINING", "ENHANCING", "PROMOTING", "OVER-RELIANCE", "CONCERNS", "BUILDING", "FOCUSING"],
                tagsMeaning: "ƒê·ªãnh nghƒ©a l·∫°i - N√¢ng cao - Th√∫c ƒë·∫©y - Ph·ª• thu·ªôc qu√° - M·ªëi lo - X√¢y d·ª±ng - T·∫≠p trung",
                points: [
                    { text: "Redefining business models with technology", tag: "REDEFINING", meaning: "ƒê·ªãnh nghƒ©a l·∫°i" },
                    { text: "Enhancing productivity through automation", tag: "ENHANCING", meaning: "N√¢ng cao" },
                    { text: "Promoting digital skills training", tag: "PROMOTING", meaning: "Th√∫c ƒë·∫©y" },
                    { text: "Over-reliance on automated systems", tag: "OVER-RELIANCE", meaning: "Ph·ª• thu·ªôc qu√° m·ª©c" },
                    { text: "Concerns about cybersecurity risks", tag: "CONCERNS", meaning: "M·ªëi lo ng·∫°i" },
                    { text: "Building inclusive digital ecosystems", tag: "BUILDING", meaning: "X√¢y d·ª±ng" },
                    { text: "Focusing on ethical technology deployment", tag: "FOCUSING", meaning: "T·∫≠p trung" }
                ]
            }
        ];

        let currentIndex = 0;
        let currentMode = 'study';
        let shuffledItems = [];
        let correctOrder = [];
        let attempts = 0;
        let timeLeft = 4 * 60 * 60;
        let timerInterval;
        let startTime = Date.now();
        let draggedElement = null;

        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (mode === 'study') {
                document.getElementById('study-mode').classList.remove('hidden');
                document.getElementById('practice-mode').classList.add('hidden');
                document.getElementById('btn-shuffle').classList.add('hidden');
                document.getElementById('btn-check').classList.add('hidden');
                document.getElementById('btn-next').classList.remove('hidden');
                document.getElementById('btn-prev').classList.remove('hidden');
            } else {
                document.getElementById('study-mode').classList.add('hidden');
                document.getElementById('practice-mode').classList.remove('hidden');
                document.getElementById('btn-shuffle').classList.remove('hidden');
                document.getElementById('btn-check').classList.remove('hidden');
                document.getElementById('btn-next').classList.add('hidden');
                document.getElementById('btn-prev').classList.add('hidden');
                shuffleItems();
            }
        }

        function displayTopic() {
            const topic = topics[currentIndex];
            document.getElementById('topic-name').textContent = topic.name;
            
            const tagsList = document.getElementById('tags-list');
            tagsList.innerHTML = '';
            topic.mainTags.forEach(tag => {
                const span = document.createElement('span');
                span.className = 'tag';
                span.textContent = tag;
                tagsList.appendChild(span);
            });
            
            document.getElementById('tags-meaning').textContent = topic.tagsMeaning;
            
            if (currentMode === 'study') {
                displayStudyMode(topic);
            } else {
                displayPracticeMode(topic);
            }
            
            document.getElementById('current-topic').textContent = currentIndex + 1;
            updateProgress();
        }

        function displayStudyMode(topic) {
            const pointsList = document.getElementById('points-list');
            pointsList.innerHTML = '';
            
            topic.points.forEach((point, index) => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="point-tag">${index + 1}. ${point.tag}</span>${point.text}<span class="point-meaning">(${point.meaning})</span>`;
                pointsList.appendChild(li);
            });
        }

        function displayPracticeMode(topic) {
            correctOrder = topic.points.map((point, index) => ({
                ...point,
                correctIndex: index
            }));
            shuffleItems();
        }

        function shuffleItems() {
            const topic = topics[currentIndex];
            shuffledItems = [...correctOrder];
            
            // Fisher-Yates shuffle
            for (let i = shuffledItems.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledItems[i], shuffledItems[j]] = [shuffledItems[j], shuffledItems[i]];
            }
            
            renderSortableItems();
            document.getElementById('feedback').innerHTML = '';
            attempts = 0;
            document.getElementById('attempts').textContent = attempts;
        }

        function renderSortableItems() {
            const container = document.getElementById('sortable-container');
            container.innerHTML = '';
            
            shuffledItems.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'sortable-item';
                div.draggable = true;
                div.dataset.index = index;
                
                div.innerHTML = `
                    <span class="drag-handle">‚ò∞</span>
                    <span class="item-number">${index + 1}</span>
                    <div class="item-content">
                        <strong>${item.text}</strong>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">
                            <span class="point-tag">${item.tag}</span>
                            <span class="point-meaning">(${item.meaning})</span>
                        </div>
                    </div>
                `;
                
                div.addEventListener('dragstart', handleDragStart);
                div.addEventListener('dragover', handleDragOver);
                div.addEventListener('drop', handleDrop);
                div.addEventListener('dragend', handleDragEnd);
                
                container.appendChild(div);
            });
        }

        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.innerHTML);
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            
            const afterElement = getDragAfterElement(e.currentTarget.parentElement, e.clientY);
            const dragging = document.querySelector('.dragging');
            
            if (afterElement == null) {
                e.currentTarget.parentElement.appendChild(dragging);
            } else {
                e.currentTarget.parentElement.insertBefore(dragging, afterElement);
            }
            
            return false;
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            
            if (draggedElement !== this) {
                const allItems = Array.from(document.querySelectorAll('.sortable-item'));
                const draggedIndex = allItems.indexOf(draggedElement);
                const droppedIndex = allItems.indexOf(this);
                
                const temp = shuffledItems[draggedIndex];
                shuffledItems[draggedIndex] = shuffledItems[droppedIndex];
                shuffledItems[droppedIndex] = temp;
            }
            
            return false;
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            renderSortableItems();
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.sortable-item:not(.dragging)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function checkOrder() {
            attempts++;
            document.getElementById('attempts').textContent = attempts;
            
            let isCorrect = true;
            let wrongPositions = [];
            
            const items = document.querySelectorAll('.sortable-item');
            items.forEach((item, index) => {
                item.classList.remove('correct', 'incorrect');
                
                if (shuffledItems[index].correctIndex === index) {
                    item.classList.add('correct');
                } else {
                    item.classList.add('incorrect');
                    isCorrect = false;
                    wrongPositions.push({
                        current: index + 1,
                        correct: shuffledItems[index].correctIndex + 1,
                        text: shuffledItems[index].text
                    });
                }
            });
            
            const feedback = document.getElementById('feedback');
            
            if (isCorrect) {
                feedback.innerHTML = `
                    <div class="feedback success">
                        üéâ Ch√≠nh x√°c! B·∫°n ƒë√£ s·∫Øp x·∫øp ƒë√∫ng th·ª© t·ª± sau ${attempts} l·∫ßn th·ª≠!
                        <div style="margin-top: 15px;">
                            <button class="btn-next" onclick="nextTopicAfterSuccess()" style="padding: 12px 25px;">
                                Chuy·ªÉn sang topic ti·∫øp theo ‚û°Ô∏è
                            </button>
                        </div>
                    </div>
                `;
            } else {
                let wrongOrderHTML = '<div class="wrong-order"><div class="wrong-order-title">‚ùå C√°c v·ªã tr√≠ sai:</div><div class="wrong-order-list">';
                wrongPositions.forEach(pos => {
                    wrongOrderHTML += `‚Ä¢ V·ªã tr√≠ ${pos.current} ‚Üí ƒê√°p √°n ƒë√∫ng ph·∫£i ·ªü v·ªã tr√≠ ${pos.correct}<br>`;
                });
                wrongOrderHTML += '</div></div>';
                
                feedback.innerHTML = `
                    <div class="feedback error">
                        ‚ùå Ch∆∞a ƒë√∫ng! H√£y th·ª≠ l·∫°i.
                        ${wrongOrderHTML}
                        <div style="margin-top: 15px;">
                            <button class="btn-shuffle" onclick="shuffleItems()" style="padding: 10px 20px;">
                                üîÄ Tr√°o l·∫°i th·ª© t·ª±
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        function nextTopicAfterSuccess() {
            if (currentIndex < topics.length - 1) {
                currentIndex++;
                displayTopic();
                attempts = 0;
                document.getElementById('attempts').textContent = attempts;
            } else {
                alert('üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ ho√†n th√†nh t·∫•t c·∫£ 18 topics!');
            }
        }

        function updateProgress() {
            const progress = ((currentIndex + 1) / topics.length) * 100;
            document.getElementById('progress').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `${currentIndex + 1}/18`;
        }

        function nextTopic() {
            if (currentIndex < topics.length - 1) {
                currentIndex++;
                displayTopic();
                attempts = 0;
                document.getElementById('attempts').textContent = attempts;
            }
        }

        function prevTopic() {
            if (currentIndex > 0) {
                currentIndex--;
                displayTopic();
                attempts = 0;
                document.getElementById('attempts').textContent = attempts;
            }
        }

        function updateTimer() {
            const hours = Math.floor(timeLeft / 3600);
            const minutes = Math.floor((timeLeft % 3600) / 60);
            const seconds = timeLeft % 60;
            
            document.getElementById('timer').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            
            const timeSpent = Math.floor((Date.now() - startTime) / 60000);
            document.getElementById('time-spent').textContent = timeSpent;
            
            if (timeLeft > 0) {
                timeLeft--;
            } else {
                clearInterval(timerInterval);
                alert('‚è∞ H·∫øt gi·ªù! B·∫°n ƒë√£ h·ªçc ƒë∆∞·ª£c bao nhi√™u topics?');
            }
        }

        function restartTimer() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën reset th·ªùi gian?')) {
                timeLeft = 4 * 60 * 60;
                startTime = Date.now();
                clearInterval(timerInterval);
                timerInterval = setInterval(updateTimer, 1000);
                updateTimer();
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (currentMode === 'study') {
                if (e.key === 'ArrowLeft') prevTopic();
                if (e.key === 'ArrowRight') nextTopic();
            }
            if (e.key === 'Enter' && currentMode === 'practice') {
                checkOrder();
            }
        });

        // Initialize
        displayTopic();
        timerInterval = setInterval(updateTimer, 1000);
        updateTimer();
    </script>
</body>
</html>