<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Learning App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .topic-title {
            font-size: 32px;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .progress {
            font-size: 18px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .flags-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .flags-title {
            font-size: 20px;
            color: #333;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .flag-item {
            display: inline-block;
            margin: 5px;
            padding: 8px 15px;
            background: #667eea;
            color: white;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .flag-translation {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .drop-zones {
            margin-bottom: 30px;
        }
        
        .drop-zone {
            min-height: 60px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            margin-bottom: 10px;
            padding: 15px;
            background: #fafafa;
            transition: all 0.3s;
            position: relative;
        }
        
        .drop-zone.drag-over {
            border-color: #667eea;
            background: #e8eaf6;
        }
        
        .drop-zone.correct {
            border-color: #4caf50;
            background: #e8f5e9;
        }
        
        .drop-zone.incorrect {
            border-color: #f44336;
            background: #ffebee;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .drop-zone-label {
            font-size: 14px;
            color: #999;
            margin-bottom: 5px;
        }
        
        .draggable-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .draggable-item {
            padding: 15px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: move;
            transition: all 0.3s;
            user-select: none;
        }
        
        .draggable-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-color: #667eea;
        }
        
        .draggable-item.dragging {
            opacity: 0.5;
        }
        
        .draggable-item.placed {
            background: #e8f5e9;
            border-color: #4caf50;
        }
        
        .item-content {
            font-size: 15px;
            color: #333;
            line-height: 1.5;
        }
        
        .success-message {
            text-align: center;
            padding: 30px;
            background: #4caf50;
            color: white;
            border-radius: 10px;
            font-size: 24px;
            margin-bottom: 20px;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .btn-next {
            display: block;
            width: 200px;
            margin: 0 auto;
            padding: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-next:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .completion-message {
            text-align: center;
            padding: 50px;
        }
        
        .completion-message h2 {
            font-size: 36px;
            color: #667eea;
            margin-bottom: 20px;
        }
        
        .completion-message p {
            font-size: 20px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container" id="app">
        <div class="header">
            <h1 class="topic-title" id="topicTitle"></h1>
            <div class="progress" id="progress"></div>
        </div>
        
        <div class="flags-section" id="flagsSection">
            <div class="flags-title">Thứ tự đúng các từ khóa:</div>
            <div id="flagsList"></div>
        </div>
        
        <div class="drop-zones" id="dropZones"></div>
        
        <div class="draggable-items" id="draggableItems"></div>
        
        <div id="successArea"></div>
    </div>

    <script>
        const topicsData = [
            {
                topic: "Digital Transformation",
                items: [
                    { flag: "REDEFINING", translation: "Định nghĩa lại", content: "Redefining business models with technology" },
                    { flag: "ENHANCING", translation: "Nâng cao", content: "Enhancing productivity through automation" },
                    { flag: "PROMOTING", translation: "Thúc đẩy", content: "Promoting digital skills training" },
                    { flag: "OVER-RELIANCE", translation: "Phụ thuộc quá mức", content: "Over-reliance on automated systems" },
                    { flag: "CONCERNS", translation: "Mối lo ngại", content: "Concerns about cybersecurity risks" },
                    { flag: "BUILDING", translation: "Xây dựng", content: "Building inclusive digital ecosystems" },
                    { flag: "FOCUSING", translation: "Tập trung", content: "Focusing on ethical technology development" }
                ]
            },
            {
                topic: "The Arrival of Four-Day Week",
                items: [
                    { flag: "OUT OF DATE", translation: "Lỗi thời", content: "A way of life now out date" },
                    { flag: "BENEFITS", translation: "Lợi ích", content: "Benefits for employees" },
                    { flag: "FINANCIAL", translation: "Tài chính", content: "Undesirable financial consequences" },
                    { flag: "UNFORESEEN", translation: "Không lường trước", content: "Unforeseen challenges for employees" },
                    { flag: "DIFFICULT", translation: "Khó khăn", content: "Difficult to change old habits" },
                    { flag: "UNFAIR", translation: "Không công bằng", content: "An Unfair for some people" },
                    { flag: "ALTERNATIVE", translation: "Giải pháp thay thế", content: "Alternative solutions worth considering" }
                ]
            },
            {
                topic: "Urban Development",
                items: [
                    { flag: "REDEFINING", translation: "Định nghĩa lại", content: "Redefining sustainable city planning" },
                    { flag: "ENCOURAGING", translation: "Khuyến khích", content: "Encouraging green spaces in urban areas" },
                    { flag: "SUPPORTING", translation: "Hỗ trợ", content: "Supporting affordable housing projects" },
                    { flag: "OVER-RELIANCE", translation: "Phụ thuộc quá mức", content: "Over-reliance on high-rise buildings" },
                    { flag: "CONCERNS", translation: "Mối lo ngại", content: "Concerns about traffic congestion" },
                    { flag: "STRENGTHENING", translation: "Tăng cường", content: "Strengthening community engagement" },
                    { flag: "FOCUSING", translation: "Tập trung", content: "Focusing on renewable energy source" }
                ]
            },
            {
                topic: "Woman Mathematics",
                items: [
                    { flag: "GENDER OBSCURE", translation: "Giới tính bị che khuất", content: "Gender obscure achievements" },
                    { flag: "ACKNOWLEDGING", translation: "Công nhận", content: "Acknowledging achievement of a pioneer" },
                    { flag: "MAN UNFAIRLY", translation: "Đàn ông không công bằng", content: "Man unfairly credited" },
                    { flag: "LONG CAREER", translation: "Sự nghiệp dài", content: "A long career showing exceptional ability" },
                    { flag: "LABELS", translation: "Nhãn mác", content: "Labels can change perspective on people" },
                    { flag: "ATTEMPTING", translation: "Cố gắng", content: "Attempting to create a gender balance" },
                    { flag: "UNIFORMITY", translation: "Sự thống nhất", content: "Uniformity is not always good" }
                ]
            },
            {
                topic: "Hotel",
                items: [
                    { flag: "FINANCIAL", translation: "Tài chính", content: "A sensible Financial Choice" },
                    { flag: "HIGH", translation: "Cao", content: "The price of convenience may be high" },
                    { flag: "ADVANTAGES", translation: "Ưu điểm", content: "The importance of planning in Advantages" },
                    { flag: "IMPACT", translation: "Tác động", content: "The impact of Lack of freedom" },
                    { flag: "LESS", translation: "Ít hơn", content: "The benefits of living with Less" },
                    { flag: "CHALLENGES", translation: "Thách thức", content: "The Challenges that Come with a New Perspective" },
                    { flag: "COMPETITIVE", translation: "Cạnh tranh", content: "A competitive Business" }
                ]
            },
            {
                topic: "Mountain",
                items: [
                    { flag: "CHANGING", translation: "Thay đổi", content: "Our changing definition of mountains" },
                    { flag: "SENSE", translation: "Ý thức", content: "A sense of achievement" },
                    { flag: "PUBLICISING", translation: "Công khai", content: "Publicising one's achievements" },
                    { flag: "DISTURBING", translation: "Đáng lo ngại", content: "A disturbing revelation" },
                    { flag: "WRONG PRIORITY", translation: "Ưu tiên sai", content: "The wrong priority" },
                    { flag: "FOCUS", translation: "Tập trung", content: "A focus on substantiality" },
                    { flag: "INTIMATE", translation: "Thân mật", content: "A more intimate relationship" }
                ]
            },
            {
                topic: "Consumer Age",
                items: [
                    { flag: "MAKING", translation: "Làm cho", content: "Making things last Longer" },
                    { flag: "EXPERIMENT", translation: "Thử nghiệm", content: "A temporary Experiment" },
                    { flag: "SECRECY", translation: "Bí mật", content: "The reason of Secrecy" },
                    { flag: "OUR TIMES", translation: "Thời đại chúng ta", content: "Still relevant to our times" },
                    { flag: "DIFFICULTY", translation: "Khó khăn", content: "The difficulty of being generous" },
                    { flag: "COMPROMISE", translation: "Thỏa hiệp", content: "Reason to reach a compromise" },
                    { flag: "LESSONS", translation: "Bài học", content: "Important lessons for all of us" }
                ]
            },
            {
                topic: "Dogget",
                items: [
                    { flag: "THE", translation: "Cái", content: "The easiest way to travel" },
                    { flag: "LUCKY", translation: "May mắn", content: "Result of a lucky escape" },
                    { flag: "ORIGINS", translation: "Nguồn gốc", content: "Origins of what the winner receives" },
                    { flag: "A", translation: "Một", content: "A need for change" },
                    { flag: "EARNING", translation: "Kiếm được", content: "Earning a reputation" },
                    { flag: "CHAMPIONS", translation: "Nhà vô địch", content: "Generations of champions" },
                    { flag: "NOT MONEY", translation: "Không phải tiền", content: "Not in it for the money" }
                ]
            },
            {
                topic: "Children Exercise",
                items: [
                    { flag: "FACTORS", translation: "Các yếu tố", content: "Factors contributing to inactivity" },
                    { flag: "WORST", translation: "Tồi tệ nhất", content: "The situation have the potential of being worst" },
                    { flag: "SUCCESS", translation: "Thành công", content: "The success of a simple idea" },
                    { flag: "EFFECTS", translation: "Tác động", content: "The wider effects of regular activity" },
                    { flag: "BEHAVIOR", translation: "Hành vi", content: "Ways in which the environment can influence behavior" },
                    { flag: "STUDY", translation: "Nghiên cứu", content: "A design for exercise and for study" },
                    { flag: "ACHIEVING", translation: "Đạt được", content: "Achieving the right balance" }
                ]
            },
            {
                topic: "Music",
                items: [
                    { flag: "PHYSICALLY", translation: "Về thể chất", content: "A physically demanding activity" },
                    { flag: "GOOD", translation: "Tốt", content: "A good way to boost your memory" },
                    { flag: "GREAT", translation: "Tuyệt vời", content: "A great opportunity to broaden your social circle" },
                    { flag: "WAY", translation: "Cách", content: "A way to learn discipline and the importance of routine" },
                    { flag: "CREATIVE", translation: "Sáng tạo", content: "A creative outlet for expressing emotions" },
                    { flag: "FEELINGS", translation: "Cảm xúc", content: "Enhanced sensitivity to other people's feelings" },
                    { flag: "WELL-BEING", translation: "Hạnh phúc", content: "Develop a greater sense of well-being" }
                ]
            },
            {
                topic: "Early Australia",
                items: [
                    { flag: "NEW", translation: "Mới", content: "New evidence to speculation" },
                    { flag: "NATURAL", translation: "Tự nhiên", content: "Natural barrier to resettlement" },
                    { flag: "TECHNOLOGY", translation: "Công nghệ", content: "Technology helps uncover the ocean's secret" },
                    { flag: "A", translation: "Một", content: "A Journey made by stages" },
                    { flag: "NO", translation: "Không", content: "No precise figures available" },
                    { flag: "LACK", translation: "Thiếu", content: "Lack of knowledge and skills" },
                    { flag: "DETERMINATION", translation: "Quyết tâm", content: "Determination of the explorers through the ages" }
                ]
            },
            {
                topic: "Frozen Land",
                items: [
                    { flag: "WHO", translation: "Ai", content: "Who is charge?" },
                    { flag: "FIRST", translation: "Đầu tiên", content: "First step on the ice" },
                    { flag: "END", translation: "Kết thúc", content: "Where is the end of the Earth" },
                    { flag: "HIDDEN", translation: "Ẩn giấu", content: "Hidden geography" },
                    { flag: "RACE", translation: "Cuộc đua", content: "Race to the pole" },
                    { flag: "LESS", translation: "Ít hơn", content: "Less effort needed" },
                    { flag: "COLD", translation: "Lạnh", content: "Why is it so cold" }
                ]
            },
            {
                topic: "Meatless Diet",
                items: [
                    { flag: "TYPES", translation: "Các loại", content: "Types of Vegetarian" },
                    { flag: "VARIOUS", translation: "Đa dạng", content: "Various explanations" },
                    { flag: "POSSIBLE", translation: "Có thể", content: "Possible global food crisis" },
                    { flag: "FACTORY", translation: "Nhà máy", content: "Farming Factory" },
                    { flag: "RESPONSIBILITIES", translation: "Trách nhiệm", content: "Our responsibilities for global" },
                    { flag: "HEALTH", translation: "Sức khỏe", content: "Health gets better with diet (Health benefits)" },
                    { flag: "LIFE", translation: "Sự sống", content: "Respect the life" }
                ]
            },
            {
                topic: "Charles Dickens",
                items: [
                    { flag: "DICKENS", translation: "Dickens", content: "Dickens for our time" },
                    { flag: "DIFFICULTIES", translation: "Khó khăn", content: "Difficulties for modern readers" },
                    { flag: "KEEPING", translation: "Giữ chân", content: "Keeping the readers guessing" },
                    { flag: "INFLUENCE", translation: "Ảnh hưởng", content: "The influence of media" },
                    { flag: "SUCCESS", translation: "Thành công", content: "Dickens's early success" },
                    { flag: "PROTECT", translation: "Bảo vệ", content: "Trying to protect his property" },
                    { flag: "BRING", translation: "Mang lại", content: "Bring the books to life" }
                ]
            },
            {
                topic: "Tulip",
                items: [
                    { flag: "GOLDEN AGE", translation: "Thời kỳ hoàng kim", content: "The economy during the Golden Age" },
                    { flag: "COMING", translation: "Đến", content: "Coming into Fashion" },
                    { flag: "AN", translation: "Một", content: "An object of trade" },
                    { flag: "TULIP", translation: "Hoa tulip", content: "Different types of tulip" },
                    { flag: "MECHANICS", translation: "Cơ chế", content: "Trade mechanics" },
                    { flag: "EUROPE", translation: "Châu Âu", content: "Trade across Europe" },
                    { flag: "UNEXPECTED", translation: "Bất ngờ", content: "An unexpected turn of events" }
                ]
            },
            {
                topic: "Eating China",
                items: [
                    { flag: "CHINESE FOOD", translation: "Ẩm thực Trung Quốc", content: "The origins of chinese food" },
                    { flag: "INFLUENCE", translation: "Ảnh hưởng", content: "The influence of philosophy" },
                    { flag: "REGIONAL", translation: "Khu vực", content: "Regional variations" },
                    { flag: "METHODS", translation: "Phương pháp", content: "Cooking methods" },
                    { flag: "STYLE", translation: "Phong cách", content: "The style of eating" },
                    { flag: "CHANGES", translation: "Thay đổi", content: "Changes in the Chinese diets" },
                    { flag: "EFFECTS", translation: "Tác động", content: "Effects of a changing diet" }
                ]
            },
            {
                topic: "Zoo",
                items: [
                    { flag: "SYMBOLS", translation: "Biểu tượng", content: "Symbols of privilege and wealth" },
                    { flag: "OPEN THE DOOR", translation: "Mở cửa", content: "Open the door for everyone" },
                    { flag: "INDUSTRY", translation: "Ngành công nghiệp", content: "Away from amusement towards industry" },
                    { flag: "FREEDOM", translation: "Tự do", content: "Away from the enclosure towards greater freedom" },
                    { flag: "VALUES", translation: "Giá trị", content: "A different set of values" },
                    { flag: "NEW", translation: "Mới", content: "A new mission of conversation" },
                    { flag: "MODERN", translation: "Hiện đại", content: "A Modern zoo alternative" }
                ]
            },
            {
                topic: "Coffee",
                items: [
                    { flag: "CUSTOM", translation: "Tập tục", content: "The custom of coffee drinking begins to spread" },
                    { flag: "COFFEE", translation: "Cà phê", content: "Coffee encourages the art of communication" },
                    { flag: "HABIT", translation: "Thói quen", content: "A habit that has become a big economy" },
                    { flag: "PROBLEMS", translation: "Vấn đề", content: "Problems of coffee economy" },
                    { flag: "REVENUE", translation: "Doanh thu", content: "A remedy of unjust revenue distribution" },
                    { flag: "HEALTH", translation: "Sức khỏe", content: "The health risks versus health benefits debate" },
                    { flag: "ORIGIN", translation: "Nguồn gốc", content: "The ancient origin of coffee" }
                ]
            }
        ];

        let currentTopicIndex = 0;
        let userAnswers = [];
        let draggedElement = null;

        function shuffle(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function initTopic() {
            if (currentTopicIndex >= topicsData.length) {
                showCompletion();
                return;
            }

            const topic = topicsData[currentTopicIndex];
            userAnswers = new Array(7).fill(null);
            
            document.getElementById('topicTitle').textContent = topic.topic;
            document.getElementById('progress').textContent = `Topic ${currentTopicIndex + 1} / ${topicsData.length}`;
            
            // Display flags
            const flagsList = document.getElementById('flagsList');
            flagsList.innerHTML = topic.items.map((item, index) => 
                `<div class="flag-item">
                    ${index + 1}. ${item.flag}
                    <div class="flag-translation">(${item.translation})</div>
                </div>`
            ).join('');
            
            // Create drop zones
            const dropZones = document.getElementById('dropZones');
            dropZones.innerHTML = topic.items.map((item, index) => 
                `<div class="drop-zone" data-index="${index}">
                    <div class="drop-zone-label">${index + 1}. ${item.flag} (${item.translation})</div>
                </div>`
            ).join('');
            
            // Create draggable items (shuffled)
            const shuffledItems = shuffle(topic.items.map((item, index) => ({...item, originalIndex: index})));
            const draggableItems = document.getElementById('draggableItems');
            draggableItems.innerHTML = shuffledItems.map((item, index) => 
                `<div class="draggable-item" draggable="true" data-original-index="${item.originalIndex}" data-id="${index}">
                    <div class="item-content">${item.content}</div>
                </div>`
            ).join('');
            
            document.getElementById('successArea').innerHTML = '';
            
            setupDragAndDrop();
        }

        function setupDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable-item');
            const dropZones = document.querySelectorAll('.drop-zone');
            
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', (e) => {
                    draggedElement = draggable;
                    draggable.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                });
                
                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('dragging');
                });
            });
            
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                });
                
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });
                
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    
                    if (draggedElement) {
                        const zoneIndex = parseInt(zone.dataset.index);
                        const itemOriginalIndex = parseInt(draggedElement.dataset.originalIndex);
                        
                        // Remove from previous position if exists
                        const prevIndex = userAnswers.indexOf(itemOriginalIndex);
                        if (prevIndex !== -1) {
                            const prevZone = document.querySelector(`.drop-zone[data-index="${prevIndex}"]`);
                            const prevItem = prevZone.querySelector('.draggable-item');
                            if (prevItem) {
                                document.getElementById('draggableItems').appendChild(prevItem);
                                prevItem.classList.remove('placed');
                            }
                            userAnswers[prevIndex] = null;
                        }
                        
                        // Remove existing item in this zone
                        const existingItem = zone.querySelector('.draggable-item');
                        if (existingItem) {
                            const existingOriginalIndex = parseInt(existingItem.dataset.originalIndex);
                            userAnswers[zoneIndex] = null;
                            document.getElementById('draggableItems').appendChild(existingItem);
                            existingItem.classList.remove('placed');
                        }
                        
                        // Place new item
                        zone.appendChild(draggedElement);
                        draggedElement.classList.add('placed');
                        userAnswers[zoneIndex] = itemOriginalIndex;
                        
                        checkAnswers();
                    }
                });
            });
        }

        function checkAnswers() {
            const allFilled = userAnswers.every(answer => answer !== null);
            
            if (allFilled) {
                const allCorrect = userAnswers.every((answer, index) => answer === index);
                
                if (allCorrect) {
                    showSuccess();
                } else {
                    showIncorrect();
                }
            }
        }

        function showSuccess() {
            const dropZones = document.querySelectorAll('.drop-zone');
            dropZones.forEach(zone => {
                zone.classList.add('correct');
            });
            
            document.getElementById('successArea').innerHTML = `
                <div class="success-message">
                    🎉 Chúc mừng! Bạn đã hoàn thành đúng!
                </div>
                <button class="btn-next" onclick="nextTopic()">Topic tiếp theo →</button>
            `;
        }

        function showIncorrect() {
            const incorrectZones = [];
            userAnswers.forEach((answer, index) => {
                const zone = document.querySelector(`.drop-zone[data-index="${index}"]`);
                if (answer !== index) {
                    zone.classList.add('incorrect');
                    incorrectZones.push(zone);
                } else {
                    zone.classList.add('correct');
                }
            });
            
            setTimeout(() => {
                incorrectZones.forEach(zone => {
                    zone.classList.remove('incorrect');
                    const item = zone.querySelector('.draggable-item');
                    if (item) {
                        document.getElementById('draggableItems').appendChild(item);
                        item.classList.remove('placed');
                    }
                });
                
                document.querySelectorAll('.drop-zone').forEach(zone => {
                    zone.classList.remove('correct', 'incorrect');
                });
                
                userAnswers = new Array(7).fill(null);
            }, 3000);
        }

        function nextTopic() {
            currentTopicIndex++;
            initTopic();
        }

        function showCompletion() {
            document.getElementById('app').innerHTML = `
                <div class="completion-message">
                    <h2>🎊 Xuất sắc!</h2>
                    <p>Bạn đã hoàn thành tất cả ${topicsData.length} topics!</p>
                    <button class="btn-next" onclick="location.reload()">Học lại từ đầu</button>
                </div>
            `;
        }

        // Initialize first topic
        initTopic();
    </script>
</body>
</html>